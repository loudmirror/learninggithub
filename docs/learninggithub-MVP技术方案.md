# LearningGitHub MVP 技术方案

> 文档版本：v0.1（MVP 冻结版，后续变更请通过新版本号体现）  
> 目标：在可控的时间内，实现「输入 GitHub 链接 → 输出中文项目概览 + 手把手运行教程 + 文件/模块讲解 + 模块化学习路径」的最低可用版本。

## 一、功能范围回顾（MVP）

- 支持用户输入任意公开 GitHub 仓库 URL
- 抓取并解析仓库的基础信息（README、目录结构、核心代码文件）
- 自动生成中文项目概览
- 自动生成从克隆到运行的手把手教程（含常见错误提示）
- 支持基础的问答（围绕项目概览和运行步骤，而不是代码行级深度调试）
- 为核心目录和关键文件生成简要说明（文件与模块讲解基础版）
- 自动构建项目的模块化学习路径（课程/模块列表），并支持前端展示与基础进度标记

不在本方案范围内的：游戏化系统、社区功能、本地大模型部署、复杂的个性化学习推荐等高级能力。

## 二、推荐技术选型（MVP 版本）

### 后端

- 语言：**Python**
- Web 框架：**FastAPI**
- GitHub 访问：GitHub REST API + 直接 `git clone`（用于获取完整文件）
- 文本处理与分段：Python 工具链（如 `python-frontmatter`、自定义分段逻辑）

### 向量化与检索

- 向量数据库：**ChromaDB**（内嵌、易集成，适合单机 MVP）
- 嵌入模型：
  - 优先：托管服务（如 OpenAI Embeddings），实现简单、效果较好
  - 备选：开源模型（如 sentence-transformers），用于成本敏感或离线场景

### 大模型与生成

- 大模型调用：通过统一的 LLM 接口封装（便于切换供应商）
- 用途：
  - 项目概览生成
  - 运行教程生成
  - 用户问答（基于检索到的上下文）

### 前端

- 技术栈：**React**（或 Next.js）+ 简单组件库（如 Ant Design 或 Tailwind）
- 功能：
  - 输入 GitHub URL 的表单
  - 展示项目概览与运行步骤
  - 简单的问答区域（聊天式 UI）

## 三、系统架构概览（MVP）

可以将系统拆分为四个主要后端模块和一个前端应用：

1. **GitHub 仓库解析服务**
   - 校验用户输入的 URL
   - 使用 GitHub API 获取基础信息（名称、描述、语言、star 数等）
   - 对于需要深入分析的仓库，可临时 `git clone` 到本地，读取文件内容

2. **内容处理与索引服务**
   - 提取 README、主要代码文件、配置文件等内容
   - 按「文件/模块」为单位进行分段，保留路径等元信息
   - 构建项目结构树（目录/文件/模块的映射），为文件讲解和学习路径提供数据基础
   - 对文本片段进行向量化，并写入向量数据库（ChromaDB）

3. **RAG 检索与生成服务**
   - 将「项目概览生成」视作一个问题：例如「用中文说明这个仓库是做什么的」
   - 检索与该问题最相关的片段（README、描述、关键文件）
   - 构造提示词，让大模型基于检索结果生成结构化输出：
     - 项目简介
     - 功能概览
     - 技术栈说明
   - 对于「运行教程」，额外检索安装脚本、`package.json`、`requirements.txt` 等文件

4. **问答服务（基础版）**
   - 接收用户以自然语言提出的问题（例如「这个项目用什么框架？」）
   - 将问题向量化，在向量库中检索相关片段
   - 将检索到的上下文和问题一起交给大模型生成答案

5. **前端应用**
   - 负责收集用户输入、展示生成内容
   - 通过 HTTP API 或 WebSocket 与后端通信

6. **学习路径与进度服务（基础版）**
   - 基于项目结构和教程步骤，生成模块化学习路径（模块列表 + 对应步骤/文件）
   - 维护用户在各模块中的完成状态（前期可仅在前端/浏览器本地存储）
   - 为前端提供统一的学习路径数据结构（用于渲染模块导航和进度指示）

## 四、关键流程（MVP）

### 1. 新仓库学习流程

1. 用户在前端输入 GitHub 仓库 URL  
2. 前端调用后端「创建学习任务」接口  
3. 后端验证 URL → 调用 GitHub API 获取仓库信息  
4. 后端按需克隆仓库、提取关键文件内容  
5. 对提取内容进行分段和向量化，写入向量数据库  
6. 基于项目结构和内容生成：
   - 中文项目概览
   - 手把手运行教程  
   - 文件与模块讲解（核心目录/关键文件的简要说明）
   - 模块化学习路径（课程/模块列表及其顺序）
7. 将结果存入数据库，并返回给前端展示（包含概览、步骤、结构说明和学习路径）

### 2. 问答流程（基础版）

1. 用户在教程页面提问  
2. 后端将问题向量化，在该仓库的向量索引中检索最相关的片段  
3. 构造提示词（包含问题 + 相关片段），调用大模型生成答复  
4. 将答案返回给前端显示

### 3. 模块化学习路径与进度流程（基础版）

1. 教程页面加载时，从教程数据中读取学习路径（模块列表 + 关联步骤/文件）
2. 前端在 UI 中展示模块列表及当前完成情况
3. 用户完成某模块下的关键步骤后，可以标记模块为「已完成」
4. 完成状态优先保存在浏览器本地（后续可扩展为账号维度的持久化）

## 五、实施阶段与里程碑（MVP）

### 阶段 1：基础解析与静态教程（约 2 周）

- 搭建 FastAPI 服务和简单 React 前端
- 完成 GitHub URL 校验与基础信息拉取
- 实现只基于 README 的中文项目概览生成（不使用向量库）
- 前端可以展示项目概览文本

**交付物：** 用户输入 URL 后，能看到一段可读的中文项目介绍。

### 阶段 2：仓库内容分析与运行教程（约 3 周）

- 增加仓库克隆与文件提取逻辑
- 引入 ChromaDB 和嵌入模型，对关键文件内容进行索引
- 基于检索结果生成「从克隆到运行」的详细步骤
- 生成基础的文件与模块讲解（核心目录、关键文件的职责说明）
- 设计并实现简单的模块化学习路径结构（模块列表 + 与步骤/文件的关联）
- 在前端展示分步运行教程和文件/模块说明

**交付物：** 用户能跟着中文步骤，把简单项目在本地跑起来，并看到项目结构和模块化学习路径。

### 阶段 3：基础问答与体验优化（约 2 周）

- 打通问答流程：问题 → 检索 → 回答
- 为生成的教程增加简单的错误排查建议
- 在前端完善学习路径的展示与交互（模块高亮、完成标记、模块内滚动/跳转）
- 优化前端交互（加载状态、错误提示、基本样式）

**交付物：** 用户可以围绕项目和教程提问，并得到上下文相关的回答，同时能够按模块化学习路径完成整个项目的学习。

## 六、约束与简化假设（MVP）

- 仅支持公开仓库（不处理私有仓库与需要企业认证的场景）
- 仓库大小和文件数量设定上限（超出则提示用户缩小范围）
- 优先支持常见技术栈（如 Node.js、Python），对其他语言给出有限支持
- 以云端托管大模型/嵌入服务为主，本地模型作为后续优化选项

在这些约束之下，可以大幅降低 MVP 实现难度，尽快验证：  
「用户是否愿意用这种方式来学习 GitHub 项目」以及「生成教程是否真正帮到他们」。
